{"meta":{"title":"星星堆满天","subtitle":"也不能比月圆","description":"这是一个无聊的博客","author":"John Doe","url":"http://example.com","root":"/"},"pages":[{"title":"歌单","date":"2021-11-08T13:26:07.000Z","updated":"2021-11-08T15:01:07.278Z","comments":true,"path":"playlist/index.html","permalink":"http://example.com/playlist/index.html","excerpt":"","text":""}],"posts":[{"title":"DC-1 第一次渗透","slug":"DC-1 第一次渗透","date":"2021-11-12T13:20:15.000Z","updated":"2021-11-12T17:54:45.125Z","comments":true,"path":"2021/11/12/DC-1 第一次渗透/","link":"","permalink":"http://example.com/2021/11/12/DC-1%20%E7%AC%AC%E4%B8%80%E6%AC%A1%E6%B8%97%E9%80%8F/","excerpt":"","text":"1.首先启动靶机 2.由于靶机与虚拟机属于同一C段下，所以考虑使用nmap拿到靶机的ip地址，使用ifconfig命令，拿到这台虚拟机的内网ip 3.由于靶机与虚拟机处于同一c段，所以只需要扫描位于同一c段的主机，就可以进行主机发现。 使用命令 ，其中 -sP参数表示使用ping扫描, -oN是写入到其后的文件，在此条命令中表示将结果写入nmap.sP中， ip/24表示该ip下的所有c段 1nmap -sP ip/24 -oN nmap.sP 扫出来以后 猜测靶机的IP为192.168.43.151 进行下一步的信息收集，要查看靶机开放了什么端口，端口上运行了什么服务 此处同样使用nmap工具，命令为 1nmap -A 靶机ip -oN nmap.A 扫出来的结果 ： 22/tcp 说明开放了22端口 运行ssh服务（加密远程登录管理服务器，是一种安全的传输协议） 80/tcp 说明开放了80端口 运行HTTP服务 111/tcp 说明开放了111端口 运行rpcbind服务，是NFS中 用来进行消息通知的服务（具体是什么漏洞后续再加强学习） 漏洞探测由于靶机开放了22端口和80端口，对于22端口上的ssh服务，如果不知道用户名和密码，尝试爆破是一 件很繁琐且效率很低的方法，所以考虑从网页入手。 使用浏览器访问该ip对应的web页面 下载Wappalyzer插件，可以看到这个网站使用什么技术搭建的 获取webshell(shell)Shell 是一个应用程序，它连接了用户和 Linux 内核，让用户能够更加高效、安全、低成本地使用 Linux 内核，这就是 Shell 的本质。 Shell 本身并不是内核的一部分，它只是站在内核的基础上编写的一个应用程序，它和 QQ、迅雷、Firefox 等其它软件没有什么区别。然而 Shell 也有着它的特殊性，就是开机立马启动，并呈现在用户面前；用户通过 Shell 来使用 Linux，不启动 Shell 的话，用户就没办法使用 Linux。 使用命令msfconsole，打开一款非常强大的渗透工具 进入msfconsole, 使用命令 1search drupal 7 目的是在metasploit里查找有没有相关drupalde 的利用脚本。 一般使用excellent的，由于第0个无法使用，这里使用第一个 1use exploit/unix/webapp/drupal_drupalgeddon2 使用命令来进行参数设置 1show options 对于Required为yes的项都需要设置才能使用，此处设置RHOSTS为目标靶机ip 1set RHOSTS 192.168.10.142 设置成功 使用命令exploit 启动 1exploit 可以看到已经攻击成功，已经建立了一个meterpreter会话，可以理解为建立了一个反弹shell 攻击成功！！！！最后一句话 meterpreter opened 1shell 可以看到已经进入到DC-1的主机了 但是现在并不是交互式的shell ,最好改成交互式的，先按下Ctrl+Z强制结束当前的shell,输入y确定 回退到meterpreter会话 再输入命令 1shell 进入到非交互式shell 在输入命令，这是为了变成交互式的shell 1python -c &#x27;import pty;pty.spawn(&quot;/bin/bash&quot;)&#x27; 这就是交互式的shell/ 进入flag1看看 1cat flag1.txt 根据提示 直接去网上搜drupal的文件结构 发现3.6 sites文件夹中有一个配置文件setting.php 则尝试去看看 123456lscd siteslscd defaultlscat settings.php 进入以后可以看到flag2,提示：不要尝试字典爆破 看到有数据库，那就登录一下数据库 使用命令 1mysql -udbuser -pR0ck3t 进入到mysql啦 使用命令查数据库噢 1show databases; 查到数据库以后 12use drupaldb;show tables;//注意这个地方的分号不能少 查到了数据库的表名后，查看users这个表的内容 1select * from users \\G; \\G为了显示好看！ 可以看到这里的密码都经过了加密，但是不知道是什么加密方式 由于flag2中提示我们不要尝试着去暴力破解，既然我们没有办法得到它的密码，但由于我们拥有数据库 的权限，可以考虑将我们已知的密码加密之后覆盖原来的密码，就可以将我们已知的密码拿来登录，接 下来的思路便是，如何加密。 直接去google一下drupal的用户密码是如何加密的 查找到这篇文章 发现scripts下有一个加密脚本，可以直接使用 先退出数据库，并且回到var/www的目录下 使用命令 1php scripts/password-hash.sh 123 &gt;password.txt 意思可能大概是 编写了一个php文件 用了password-hash.sh的转换形式，然后可以把123转换成与数据库相同的加密方式 就拿到了123加密后的密码，接下来拿这行密码去替换mysql中的admin的密码， 进入mysql 使用命令 12mysql -udbuser -pR0ck3t 123use drupaldb;update users set pass=&#x27;$S$DkN.RoKXZxoV58CBBB6ffl/FcI79v.iXXsAFeAPPwiS6OHvBkBR1&#x27;where uid=1; 然后再查一下数据库的表 成功更改！ 然后尝试用这个用户去登录！非常好！登录成功！ 然后就随便点 ，content那里有个flag3 提权根据flag3中提到的关键词 perms find passwd -exec ，无论是正常的渗透测试流程，还是此处给出的提 示，都在指引我们走向提权。 此处flag提示的意义在于，它想让我们去读取/etc/passwd，但事实上这个文件需要root权限才能读取， 而我们只是一般的普通用户权限，故此处考虑提权。 由于提示了perm，则考虑使用具有suid的命令来提权 1find / -perm -4000 提权！提权！ 1find password.txt -exec &#x27;/bin/sh&#x27; \\; /etc/passwd 和/etc/shadow需要大家自行了解这两个文件的关系 都是存放账号 的信息：用户名和密码之类的，但是/etc/passwd是任何用户都能访问，/etc/shadow是只有root用户能访问，且一般是加密过的。 现在的Unix/Linux系统中，口令不再直接保存在passwd文件中，通常将passwd文件中的口令字段使用一个“x”来代替，将/etc /shadow作为真正的口令文件，用于保存包括个人口令在内的数据。当然shadow文件是不能被普通用户读取的，只有超级用户才有权读取。 此外，需要注意的是，如果passwd字段中的第一个字符是“*”的话，那么，就表示该账号被查封了，系统不允许持有该账号的用户登录。 cat /ect/passwd看到有flag 4 直接去搜这个文件 1find / -name flag4* 该命令表示 搜索根目录(/)下的所有文件 -name参数表示符合其后内容的文件名 *为linux中的通配符 此处可以理解为任意字符任意数量 即flag4.lsjyyds flag4.lsjsb 都可以匹配到 搜到了这个 直接进入文件 根据提示，你可以用相同的方法进入root 吗，嗯就这样进入就行了 123cd /rootlscat thefinalflag.txt 很棒 结束了，但某些问题还是一头雾水，还要仔细复盘！ 以上大部分来自于lj同学给的靶场通关笔记！讲得非常清楚！！！！","categories":[],"tags":[{"name":"学习","slug":"学习","permalink":"http://example.com/tags/%E5%AD%A6%E4%B9%A0/"}]},{"title":"测试","slug":"测试","date":"2021-11-12T13:20:15.000Z","updated":"2021-11-12T13:25:15.730Z","comments":true,"path":"2021/11/12/测试/","link":"","permalink":"http://example.com/2021/11/12/%E6%B5%8B%E8%AF%95/","excerpt":"","text":"这是一个test 我要上传图片啦，希望它不会挂掉。 一个疑问：为什么刚生成一个md文件的时候 typora不能正常打字","categories":[],"tags":[]},{"title":"好想去看雪","slug":"好想去看雪","date":"2021-11-08T05:20:25.000Z","updated":"2021-11-08T17:14:01.285Z","comments":true,"path":"2021/11/08/好想去看雪/","link":"","permalink":"http://example.com/2021/11/08/%E5%A5%BD%E6%83%B3%E5%8E%BB%E7%9C%8B%E9%9B%AA/","excerpt":"","text":"I’m so glad you made time to see me How’s life, tell me how’s your family I haven’t seen them in a while You’ve been good, busier than ever We small talk, work and the weather Your guard is up and I know why Because the last time you saw me is still burned in the back of your mind You gave me roses and I left them there to die So this is me swallowing my pride Standing in front of you saying I’m sorry for that night And I go back to December all the time It turns out freedom ain’t nothing but missing you Wishing I’d realized what I had when you were mine I go back to December, turn around and make it alright I go back to December all the time These days I haven’t been sleeping Staying up playing back myself leaving When your birthday passed and I didn’t call Then I think about summer, all the beautiful times I watched you laughing from the passenger side And realized I loved you in the fall And then the cold came, the dark days when fear crept into my mind You gave me all your love and all I gave you was goodbye So this is me swallowing my pride Standing in front of you saying I’m sorry for that night And I go back to December all the time It turns out freedom ain’t nothing but missing you Wishing I’d realized what I had when you were mine I go back to December, turn around and change my own mind I go back to December all the time I miss your tan skin, your sweet smile, so good to me, so right And how you held me in your arms that September night The first time you ever saw me cry Maybe this is wishful thinking Probably mindless dreaming But if we loved again, I swear I’d love you right I’d go back in time and change it, but I can’t So if the chain is on your door I understand But this is me swallowing my pride Standing in front of you saying I’m sorry for that night And I go back to December It turns out freedom ain’t nothing but missing you Wishing I’d realized what I had when you were mine I go back to December turn around and make it alright I go back to December, turn around and change my own mind I go back to December all the time All the time 以上，分享一首很有冬天氛围的歌《Back To December》 就，看到北方同学的雪景图，突然就好想去看雪！","categories":[],"tags":[{"name":"日常","slug":"日常","permalink":"http://example.com/tags/%E6%97%A5%E5%B8%B8/"}]}],"categories":[],"tags":[{"name":"学习","slug":"学习","permalink":"http://example.com/tags/%E5%AD%A6%E4%B9%A0/"},{"name":"日常","slug":"日常","permalink":"http://example.com/tags/%E6%97%A5%E5%B8%B8/"}]}